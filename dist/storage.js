(function(a,h){var g=a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB;Base.Storage=new function(){function a(c,d){if(f)d(f.transaction("ForageStorage",c).objectStore("ForageStorage"));else{var b=g.open("Base.ForageStorage",1);b.onerror=function(){console.error("\u4e0d\u80fd\u6253\u5f00\u6570\u636e\u5e93: '"+b.error.name+"'")};b.onupgradeneeded=function(){b.result.createObjectStore("ForageStorage")};b.onsuccess=function(){f=b.result;d(f.transaction("ForageStorage",c).objectStore("ForageStorage"))}}}
var f=null;return{support:function(){return!!g},get:function(c,d){a("readonly",function(b){var e=b.get(c);e.onsuccess=function(){d(void 0!==e.result?e.result:null)};e.onerror=function(){console.error("Error in storage.get(): "+e.error.name)}})},set:function(c,d,b){a("readwrite",function(e){var a=e.put(d,c);b&&(a.onsuccess=function(){b()});a.onerror=function(){console.error("\u5199\u5165\u5931\u8d25: "+a.error.name)}})},remove:function(c,d){a("readwrite",function(b){var a=b["delete"](c);d&&(a.onsuccess=
function(){d()});a.onerror=function(){console.error("Error in storage.remove(): "+a.error.name)}})},clear:function(c){a("readwrite",function(a){var b=a.clear();c&&(b.onsuccess=function(){c()});b.onerror=function(){console.error("\u6e05\u9664\u5931\u8d25: "+b.error.name)}})}}}})(window);
